test_name: test_minimal_manifest
test_filename: test_subgraph_2_time_dimension.py
docstring:
  Test generation of the time-dimension subgraph using the minimal manifest.
expectation_description:
  The graph should show an edge from the joined-model node to the time-dimension node.
---
dot_notation:
  digraph {
  	graph [name=MutableSemanticGraph]
  	subgraph cluster_key {
  		label=key
  		"KeyAttribute(booking)"
  	}
  	subgraph cluster_bookings_source {
  		label=bookings_source
  		"JoinedModel(bookings_source)"
  		"LocalModel(bookings_source)"
  		"Measure(booking_count)"
  	}
  	subgraph cluster_time_dimension {
  		label=time_dimension
  		MetricTime
  		"TimeDimension(booking_time)"
  	}
  	subgraph cluster_time {
  		label=time
  		TimeEntity
  	}
  	"JoinedModel(bookings_source)" -> "KeyAttribute(booking)"
  	"LocalModel(bookings_source)" -> "KeyAttribute(booking)"
  	"JoinedModel(bookings_source)" -> "TimeDimension(booking_time)"
  	"Measure(booking_count)" -> "LocalModel(bookings_source)"
  	"Measure(booking_count)" -> MetricTime
  	"TimeDimension(booking_time)" -> TimeEntity
  }

pretty_format:
  MutableSemanticGraph(
    nodes={
      KeyAttribute(booking),
      JoinedModel(bookings_source),
      LocalModel(bookings_source),
      Measure(booking_count),
      MetricTime,
      TimeDimension(booking_time),
      TimeEntity,
    },
    edges={
      EntityAttributeEdge(tail_node=JoinedModel(bookings_source), head_node=KeyAttribute(booking)),
      EntityAttributeEdge(tail_node=LocalModel(bookings_source), head_node=KeyAttribute(booking)),
      EntityRelationshipEdge(tail_node=JoinedModel(bookings_source), head_node=TimeDimension(booking_time)),
      EntityRelationshipEdge(tail_node=Measure(booking_count), head_node=LocalModel(bookings_source)),
      EntityRelationshipEdge(tail_node=Measure(booking_count), head_node=MetricTime),
      EntityRelationshipEdge(tail_node=TimeDimension(booking_time), head_node=TimeEntity),
    },
  )
